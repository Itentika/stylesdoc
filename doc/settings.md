[[_TOC_]]

# Конфигурация приложения с помощью файла settings.json

Один из вариантов того, как может выглядеть файл настроек

```json
{
    "website": {
        "colorScheme": "green",
        "watermark": false,
        "watermarkText": "Developed by <a href=\"https://itentika.ru/\">ITentika</a>",
        "baseUrl": "http://example.com/",        
        "displayAlias": false,

        "trackingCode": "code",
        "webAnalyticKey": "key",
        "webAnalyticType": "type"
    },
    "destination": "./public",
    "displayAccess": [
        "public",
        "private"
    ],
    "exclude": ["file_to_exclude.scss"],
    "autofill": true,
    "privatePrefix": "^[_-]",
    "groups": {
        "undefined": "general"
    },
    "sort": [
        "group<",
        "path<",
        "access>"
    ]
}
```

Конфигурация делится на части. В одной из них собраны параметры, которые имеют отношение к отображению документации в web-формате, а в другой - те, что влияют на работу приложения.

```js
{
  "website": {}, //<- здесь все, что относится к web-представлению
   ...
}
```

## Конфигурирование web-формата документации

Параметры для web-формата собраны в разделе `website`.

### watermark

Значениe: `true | false`\
По умолчанию: `true`.\
Определяет нужно ли отображать секцию `watermark` на сайте.

### watermarkText

Значение: `string`\
Задает содержание текста, отображаемого в секции watermark.\
Например, `"watermarkText": "Developed by <a href=\\"https://itentika.ru/\\">ITentika</a>"`

### colorScheme

Значение: `light, dark, green, blue, orange, purple.`\
По умолчанию: `light`.\
Задает цветовую схему, которая будет использована в web-представлении документации.

Задает папку в которую будут скопированы файлы web-формата документации. Может быть абсолютным путем.\
Относительный путь строится от папки `web`, входящей в установочный пакет приложения. Т.е. `./public` = `web/public`.

### displayAlias

Значение: `true | false`\
По умолчанию: `false`.\
Определяет, надо ли отображать `alias` в web-формате. 

### shortcutIcon

Значение: `string`\
Используется, чтобы указать `favicon`. Значением может быть путь к файлу, абсолютный или относительный.

### trackingCode

Значение: `string`\
Используется для настройки web-аналитики (google analytics или Яндекс.Метрика)

### webAnalyticKey

Значение: `string`\
Используется для настройки web-аналитики (google analytics или Яндекс.Метрика)

### webAnalyticType

Значение: `string`\
Используется для настройки web-аналитики (google analytics или Яндекс.Метрика)

## Конфигурация работы приложения

Следующие параметры регулируют работу приложения и вид данных, сохраняемых в JSON-формате. 

### destination

Значение: `string`\
По умолчанию: "" или `./web/public`.\
Например, `"destination": "с:\\temp\\my_doc"`\


Задает место (папку или файл) куда записывается результат работы приложения. 

Режим работы приложения задается флагом `--to-html` или `--to-json`. В результате будет сгенерирован либо локальный веб-сайт, либо файл в JSON-формате со списком всех документированных элементов. Соответственно, от поля `destination` в настройках или дублирующего его флага CLI `--dest`(`-d`), будет ожидаться путь либо к папке, либо к файлу. 

При этом, чтобы защититься от пользовательских ошибок, приложение само попытается определить нужное ему значение.\
Как это будет описано в таблице ниже:


| Режим работы  | Команда                              | Как она будет использована |
| :---          | :---                                 | :---                        |
| `--to-html`   | `--dest c:\\temp\\output\data.json`  | В этом режиме нужен путь к папке,<br> и он будет извлечен как `c:\\temp\\output\` |
| `--to-html`   | `--dest c:\\temp\\output\`           | Путь к папке будет `c:\\temp\\output\` |
| `--to-json`   | `--dest c:\\temp\\output\`           | В этом режиме нужен путь к файлу,<br> имя файла по умолчанию будет добавлено<br> как `c:\\temp\\output\data.json` |
| `--to-json`   | `--dest c:\\temp\\output\data.json`  | Путь к файлу будет `c:\\temp\\output\`  |



### displayAccess

Значение: массив значений `public | private`\
По умолчанию: `["public", "private"]`.\
Оставляет в выводе только те элементы у которых поле `access` входит в перечисленные значения. 

### autofill

Значениe: `true | false`\
По умолчанию: `true`.\
Определяет разрешено ли автозаполнение **для всех **аннотаций.

Автозаполнение используется в ряде аннотаций, чтобы уточнить или дополнить значение. Но применительно к особо сложному синтаксису автозаполнение может работать некорректно и нужно иметь возможность его отключить, чтобы исключить "ложные срабатывания". 

### disableAutofill

Значениe: массив строк\
По умолчанию: [].\
Например, `"disableAutofill": ["access", "content", "require", "throw"]`


Отключает автозаполнение для перечисленных аннотаций. Работает только в связке с `autofill=true`. А если автозаполнение отключено, то отключено для всех. 

### privatePrefix

Значение: `true | false` или `string` (Regex), может быть не указано (`undefined`)\
По умолчанию: значение не указано (а значит будет использовано регулярное выражение `^[_-]`)

Описывает дополнительные возможности определения уровня доступа - `access`.


Если в документации элемента явно присутствует аннотация `@access`-- учитывается только она.\
Если аннотации `@access` нету, и автозаполнение отключено, то `access = public`.\ 
Но если автозаполнение включено, то можно определить, что `access = private` по названию элемента. Для этого и используется регулярное выражение из поля `privatePrefix`.


Если значением поля `privatePrefix` является: 
- **регулярное выражение**, то оно описывает варианты названий, которые будут считаться `private`
- `true` или поле вообще отсутствует, то используется `^[_-]`, т.е. элементы `_foo` и `-foo`  будут считаться `private` если:
- `false`, то уровень доступа будет регулироваться только с помощью `@access`. 

### exclude

Значение: массив строк
По умолчанию: []
Например, `"exclude": ["example/simple.scss", “example/simple.{scss,less}”, “example/s*”]`

В этом поле можно перечислить файлы, которые надо исключить из обработки. 

### groups

Значение: объект-словарик, перечисляющий читабельную замену некоторым названиям групп
По умолчанию: {}
Например: 
```js
{
  "groups": {
     undefined: "General group",
     ogogoClasses: "Classes that are very important"
   }
}
```

Если при разборе документации будет встречены группы с названиями, перечисленными в словарике `groups`, то их имена будут заменены на соответствующие. 